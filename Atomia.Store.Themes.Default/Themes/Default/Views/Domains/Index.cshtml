@model Atomia.Store.Themes.Default.Models.DomainsViewModel
@using Atomia.Store.Core;
@using Atomia.Store.WebBase.HtmlHelpers;

@{
    Layout = "~/Themes/Default/Views/_MainLayout.cshtml";
    ViewBag.Title = Html.CommonResource("DomainRegTitle");
}

<h3>@ViewBag.Title</h3>
<div class="settingsboxinner">
    <p>@Html.CommonResourceRaw("DomainRegDescription")</p>

    @using (Html.BeginForm())
    {

        <fieldset>
            
            <label for="queryType-domainreg">
                <input id="queryType-domainreg" name="queryType" type="radio" value="domainreg" data-bind="checked: Domains.queryType" />
                
            </label>

            <label for="queryType-transfer">
                <input id="queryType-transfer" name="queryType" type="radio" value="transfer" data-bind="checked: Domains.queryType" />
                
            </label>
        </fieldset>
    }

    <div data-bind="visible: Domains.domainRegActive">
        @Html.Partial("_DomainRegistration", Model)
    </div>
</div>

@section scripts {
    @Scripts.Render("~/bundles/domains")

    <script type="text/javascript">
        Atomia.RootVM.DomainReg.extendItems(function (item) {
            var dmnId = 'dmn' + item.Index;
            item.Price = item.PricingVariants[0].Price;
            item.AvailabilityClass = 'not_available';
            item.HoverTitle = item.DomainName + ' @Html.CommonResource("DomainNotAvailableHoverTitle")';
            item.StatusAndPrice = '<span class="price"><em>' + '@Html.CommonResource("Taken")' + '</em>' + item.Price + '</span>';

            if (item.Status === 'available')
            {
                item.AvailabilityClass = 'available';
                item.HoverTitle = item.DomainName + ' @Html.CommonResource("DomainAvailableHoverTitle")';
                item.StatusAndPrice = '<label class="price"><input type="checkbox" id="' + dmnId + '" /><label for="' + dmnId + '"></label><label for="' + dmnId + '"></label><span>' + item.Price + '</span></label>';
            }

            return item;
        });
    </script>
}
