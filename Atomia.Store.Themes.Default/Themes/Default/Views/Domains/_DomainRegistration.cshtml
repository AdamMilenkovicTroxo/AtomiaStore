@model Atomia.Store.Themes.Default.Models.DomainsViewModel
@using Atomia.Store.WebBase.HtmlHelpers;

<div class="domainreg-query big_search">
@using (Html.BeginForm("FindDomains", "Domains", FormMethod.Post, new { data_bind = "submitValid: DomainReg.submit" }))
{
    @Html.TextBoxFor(m => m.SearchQuery, new { data_bind = "value: DomainReg.query", id = "register_box", placeholder = "mydomain.com"})
    <button type="submit" class="button green" style="vertical-align:top;">Find domain</button>
    <p>@Html.ValidationMessageFor(m => m.SearchQuery)</p>
}
</div>
<br class="clear">

<div class="domainreg-results" data-bind="visible: DomainReg.hasResults" style="display: none;">
    <h4 class="fancy">@Html.CommonResource("DomainRegResultsHeading") <strong data-bind="text: DomainReg.query"></strong></h4>
    <ul class="domains" data-bind="foreach: DomainReg.results()">
        <li data-bind="attr: { class: AvailabilityClass, title: HoverTitle }">
            <span data-bind="text: Name" class="domain"></span>
            <span data-bind="html: StatusAndPrice">
            </span>
        </li>
    </ul>
    <table data-bind="visible: DomainReg.showMoreResults">
        <thead>
            <tr>
                <th>Domain name</th>
                <th>Status</th>
                <th>Annual fee</th>
                <th>Buy</th>
            </tr>
        </thead>
        <tbody data-bind="foreach: DomainReg.results()">
            <tr>
                <td data-bind="text: DomainName"></td>
                <td data-bind="text: Status"></td>
                <td data-bind="text: Price"></td>
                <td data-bind="click: addToCart"><button>Add to cart</button></td>
            </tr>
        </tbody>
    </table>
    <p data-bind="visible: !DomainReg.showMoreResults()"><a id="more" class="button small green" data-bind="click: DomainReg.setShowMoreResults" href="javascript:void(0);">More results</a></p>
    @Html.RouteLink(Html.CommonResource("Next"), "Hosting", null, new { id = "next_step", @class="button large green" })
</div>
<div data-bind="visible: DomainReg.isLoadingResults" style="display: none;">
    <div id="global_processing" class="global_processing"></div>
    <div id="global_processing_overlay" class="blocker"></div>
</div>
