@model Atomia.Store.Themes.Default.Models.DomainsViewModel
@using Atomia.Store.WebBase.HtmlHelpers;

<div class="domainreg-query big_search">
    @using (Html.BeginForm("FindDomains", "Domains", FormMethod.Post, new { data_bind = "submitValid: DomainRegistration.Submit" }))
    {
        @Html.TextBoxFor(m => m.SearchQuery, new { data_bind = "value: DomainRegistration.Query", id = "register_box", placeholder = "mydomain.com" })
        <button type="submit" class="button green" style="vertical-align:top;">Find domain</button>
        <p>@Html.ValidationMessageFor(m => m.SearchQuery)</p>
    }
</div>
<br class="clear">

<div class="domainreg-results" data-bind="visible: DomainRegistration.HasResults" style="display: none;">
    <h4 class="fancy">@Html.CommonResource("DomainRegResultsHeading") <strong data-bind="text: DomainRegistration.Query"></strong></h4>
    <ul class="domains" data-bind="foreach: DomainRegistration.PrimaryResults()">
        <!-- ko if: Status === 'available' -->
            <li class="available" title="@Html.CommonResource("DomainAvailableHoverTitle")">
                <span class="domain">.<!-- ko text: DomainNameTld --><!-- /ko --></span>
                <label class="price">
                    <input type="checkbox" data-bind="attr: { id: LabelId }, click: ToggleInCart, checked: IsInCart" />
                    <label data-bind="attr: { for: LabelId }"></label>
                    <label data-bind="attr: { for: LabelId }"></label>
                    <span data-bind="text: Price"></span>
                </label>
            </li>
        <!-- /ko -->
        <!-- ko if: Status !== 'available' -->
            <li class="not_available" title="@Html.CommonResource("DomainNotAvailableHoverTitle")">
                <span class="domain">.<!-- ko text: DomainNameTld --><!-- /ko --></span>
                <span class="price">
                    <em>@Html.CommonResource("Taken")</em>
                    <span data-bind="text: Price"></span>
                </span>
            </li>
        <!-- /ko -->
    </ul>
    <table class="list display strong" id="domainlist" style="display: table;" data-bind="visible: DomainRegistration.ShowMoreResults">
        <thead>
            <tr>
                <th class="left">@Html.CommonResource("Domain")</th>
                <th class="right" style="width: 20%;">@Html.CommonResource("Fee")</th>
                <th style="width: 20%;"></th>
            </tr>
        </thead>
        <tbody data-bind="foreach: DomainRegistration.SecondaryResults()">
            <!-- ko if: Status === 'available' -->
            <tr>
                <td><!-- ko text: DomainNameSld --><!-- /ko --><strong>.<!-- ko text: DomainNameTld --><!-- /ko --></strong></td>
                <td class="right nowrap" data-bind="text: Price"></td>
                <td>
                    <a title="Add to cart" href="javascript:void(0);" class="button" data-bind="click: AddToCart, visible: !IsInCart()">@Html.CommonResource("AddToCart")</a>
                    <a title="Remove from cart" href="javascript:void(0);" class="button orange" data-bind="click: RemoveFromCart, visible: IsInCart">@Html.CommonResource("Remove")</a>
                </td>
            </tr>
            <!-- /ko -->
            <!-- ko if: Status === 'unavailable' -->
                <tr>
                    <td><span class="fade"><!-- ko text: DomainNameSld --><!-- /ko --><strong>.<!-- ko text: DomainNameTld --><!-- /ko --></strong></span></td>
                    <td class="right nowrap"><span class="fade" data-bind="text: Price"></span></td>
                    <td><span class="taken">@Html.CommonResource("Taken")</span></td>
                </tr>
            <!-- /ko -->
            <!-- ko if: Status === 'processing' -->
                <tr>
                    <td><span class="fade"><!-- ko text: DomainNameSld --><!-- /ko --><strong>.<!-- ko text: DomainNameTld --><!-- /ko --></strong></span></td>
                    <td class="right nowrap" data-bind="text: Price"></td>
                    <td><span class="processing"></span></td>
                </tr>
            <!-- /ko -->
        </tbody>
    </table>
    <p data-bind="ifnot: DomainRegistration.ShowMoreResults">
        <a id="more" class="button small green" data-bind="click: DomainRegistration.SetShowMoreResults" href="javascript:void(0);">@Html.CommonResource("MoreResults")</a>
    </p>
    <p class="actions">
        @Html.RouteLink(Html.CommonResource("Next"), "Hosting", null, new { id = "next_step", @class = "button large green" })
    </p>
</div>
<div data-bind="visible: DomainRegistration.IsLoadingResults" style="display: none;">
    <div id="global_processing" class="global_processing"></div>
    <div id="global_processing_overlay" class="blocker"></div>
</div>
